<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
    getAuth, 
    onAuthStateChanged,
    signOut
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCpuX28qe2YFhX2rSzH01AIPP9EQDIsP94",
    authDomain: "colestur-reservas.firebaseapp.com",
    projectId: "colestur-reservas",
    storageBucket: "colestur-reservas.firebasestorage.app",
    messagingSenderId: "123689903908",
    appId: "1:123689903908:web:d4d710d7165e64a369f5b1",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loading = document.getElementById("loading");
const panel = document.getElementById("panel");

onAuthStateChanged(auth, (user) => {
    if (user) {
        loading.style.display = "none";
        panel.style.display = "block";
    } else {
        // ðŸ”¥ GitHub Pages necesita MÃS tiempo:
        setTimeout(() => {
            onAuthStateChanged(auth, (user2) => {
                if (user2) {
                    loading.style.display = "none";
                    panel.style.display = "block";
                } else {
                    window.location.href = "login.html";
                }
            });
        }, 1200);
    }
});

document.getElementById("logout").onclick = () => {
    signOut(auth).then(() => window.location.href = "login.html");
};
</script>
