<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Reservar ‚Äì COLESTUR</title>

<style>
  :root {
    --bg: #050508;
    --card: #0c0d11;
    --card-soft: #13141b;
    --accent: #3a7ce9;
    --accent-glow: rgba(58,124,233,0.35);
    --text: #f4f6f9;
    --muted: #9ca3b5;
    --border: #1c1d25;
    --success: #42ba96;
    --danger: #ff5a5f;
    --shadow-deep: 0 25px 45px rgba(0,0,0,0.65);
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: var(--bg);
    font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
    color: var(--text);
  }

  /* HEADER */
  header {
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    backdrop-filter: blur(8px);
    border-bottom: 1px solid #0e1015;
    background: rgba(10,10,14,0.6);
  }

  .logo-circle {
    width: 38px;
    height: 38px;
    border-radius: 999px;
    background: linear-gradient(135deg, #ffeaa7, #f1c40f);
    font-weight: 900;
    font-size: 18px;
    color: #111;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .brand-text h1 {
    margin: 0;
    font-size: 19px;
    font-weight: 700;
  }

  .brand-text span {
    font-size: 12px;
    color: var(--muted);
  }

  /* MAIN */
  main {
    padding: 20px 16px 110px;
    max-width: 780px;
    margin: auto;
  }

  .welcome {
    background: linear-gradient(135deg, #14151d, #0c0d11);
    padding: 18px;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.05);
    margin-bottom: 22px;
    box-shadow: var(--shadow-deep);
  }

  /* CARD */
  .trip-card {
    background: var(--card);
    padding: 18px;
    border-radius: 18px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-deep);
    margin-bottom: 22px;
  }

  .input-block {
    margin-bottom: 14px;
  }

  label {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 6px;
    display: block;
  }

  input, select {
    width: 100%;
    background: var(--card-soft);
    color: var(--text);
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid var(--border);
    font-size: 14px;
  }

  #map {
    width: 100%;
    height: 300px;
    border-radius: 18px;
    overflow: hidden;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-deep);
    margin-bottom: 12px;
  }

  .info-box {
    background: #0f1016;
    padding: 14px;
    border-radius: 14px;
    border: 1px solid #1c1d25;
    margin-bottom: 18px;
    font-size: 14px;
    color: var(--muted);
  }

  /* GRID */
  .grid {
    display: grid;
    gap: 14px;
    grid-template-columns: repeat(auto-fit,minmax(150px,1fr));
  }

  /* BOTTOM BAR */
  .bottom-bar {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: #0b0c10;
    padding: 12px 20px 26px;
    display: flex;
    justify-content: space-around;
    z-index: 20;
    border-top: 1px solid #1c1d25;
  }

  .bottom-bar a {
    text-decoration: none;
    color: var(--text);
    font-size: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 0.8;
  }

  .bottom-bar a img {
    width: 26px;
    opacity: 0.9;
  }

  .bottom-bar a:active {
    opacity: 1;
  }

  .btn-primary {
    width: 100%;
    padding: 14px;
    background: var(--accent);
    border: none;
    border-radius: 999px;
    font-weight: 600;
    box-shadow: 0 10px 25px var(--accent-glow);
    margin-top: 12px;
    color: white;
  }
</style>
</head>

<body>

<header>
  <div class="logo-circle">CR</div>
  <div class="brand-text">
    <span>TRANSPORTE ESPECIAL</span>
    <h1>COLESTUR S.A.S.</h1>
  </div>
</header>

<main>

  <section class="welcome">
    <h2 style="margin:0;">Planifica tu servicio</h2>
    <p>Reserva tu transporte especial con recogida autom√°tica y mapa interactivo.</p>
  </section>

  <!-- TRIP CARD -->
  <section class="trip-card">
    <div class="input-block">
      <label>Punto de recogida</label>
      <input id="origen" placeholder="Buscando ubicaci√≥n..." />
    </div>

    <div class="input-block">
      <label>Destino</label>
      <input id="destino" placeholder="¬øA d√≥nde vas?" />
    </div>
  </section>

  <!-- MAPA -->
  <div id="map"></div>

  <!-- INFO DISTANCIA & TIEMPO -->
  <div id="info" class="info-box" style="display:none;">
    <p><b>Distancia:</b> <span id="distancia"></span></p>
    <p><b>Tiempo estimado:</b> <span id="tiempo"></span></p>
  </div>

  <!-- DETALLES -->
  <section class="trip-card">
    <div class="grid">

      <div class="input-block">
        <label>Nombre completo</label>
        <input id="nombre" />
      </div>

      <div class="input-block">
        <label>WhatsApp</label>
        <input id="telefono" placeholder="57300..." />
      </div>

      <div class="input-block">
        <label>Servicio</label>
        <select id="servicio">
          <option>Escolar</option>
          <option>Empresarial</option>
          <option>Turismo</option>
          <option>Aeropuerto</option>
        </select>
      </div>

      <div class="input-block">
        <label>Fecha</label>
        <input type="date" id="fecha">
      </div>

      <div class="input-block">
        <label>Hora</label>
        <input type="time" id="hora">
      </div>

      <div class="input-block">
        <label>Pasajeros</label>
        <input type="number" id="pasajeros" value="1" min="1">
      </div>

    </div>
  </section>

  <input type="hidden" id="origen_lat">
  <input type="hidden" id="origen_lng">
  <input type="hidden" id="destino_lat">
  <input type="hidden" id="destino_lng">

  <button class="btn-primary" id="btnReservar">Confirmar reserva</button>

</main>

<!-- BARRA INFERIOR -->
<nav class="bottom-nav">
  <a href="index.html">üè† Inicio</a>
  <a href="reservar.html">üöå Reservar</a>
  <a href="contacto.html">üìû Contacto</a>
</nav>



<!-- MAP SCRIPT -->
<script>
let map, directionsService, directionsRenderer;
let originMarker, destMarker;

function initMap() {

  directionsService = new google.maps.DirectionsService();
  directionsRenderer = new google.maps.DirectionsRenderer({
    suppressMarkers: true,
    polylineOptions: { strokeColor: "#3a7ce9", strokeWeight: 6 }
  });

  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const loc = { lat: pos.coords.latitude, lng: pos.coords.longitude };

      map = new google.maps.Map(document.getElementById("map"), {
        center: loc,
        zoom: 15,
        disableDefaultUI: true
      });

      directionsRenderer.setMap(map);

      originMarker = new google.maps.Marker({
        position: loc,
        map,
        icon: {
          path: google.maps.SymbolPath.CIRCLE,
          scale: 8,
          fillColor:"#3a7ce9",
          fillOpacity:1,
          strokeColor:"#fff",
          strokeWeight:2
        }
      });

      // Autorelleno origen REAL
      const geocoder = new google.maps.Geocoder();
      geocoder.geocode({ location: loc }, (res, status) => {
        if (status === "OK" && res[0]) {
          document.getElementById("origen").value = res[0].formatted_address;
        } else {
          document.getElementById("origen").value = "Mi ubicaci√≥n";
        }
      });

      document.getElementById("origen_lat").value = loc.lat;
      document.getElementById("origen_lng").value = loc.lng;

      /* Autocompletar ORIGEN Y DESTINO */
      const inputOrigen = document.getElementById("origen");
      const inputDestino = document.getElementById("destino");

      const autoOrigen = new google.maps.places.Autocomplete(inputOrigen);
      autoOrigen.addListener("place_changed", () => {
        const p = autoOrigen.getPlace();
        if (!p.geometry) return;
        updateOrigin(p.geometry.location, p.formatted_address);
      });

      const autoDestino = new google.maps.places.Autocomplete(inputDestino);
      autoDestino.addListener("place_changed", () => {
        const p = autoDestino.getPlace();
        if (!p.geometry) return;
        updateDestination(p.geometry.location, p.formatted_address);
      });

    },
    () => alert("Activa la ubicaci√≥n para usar el mapa.")
  );
}

function updateOrigin(latlng, text) {
  document.getElementById("origen_lat").value = latlng.lat();
  document.getElementById("origen_lng").value = latlng.lng();
  document.getElementById("origen").value = text;

  originMarker.setPosition(latlng);
  map.setCenter(latlng);
  calculateRoute();
}

function updateDestination(latlng, text) {
  document.getElementById("destino_lat").value = latlng.lat();
  document.getElementById("destino_lng").value = latlng.lng();
  document.getElementById("destino").value = text;

  if (!destMarker) {
    destMarker = new google.maps.Marker({
      position: latlng,
      map,
      icon: {
        path: "M 0 0 L 2 4 L 0 12 L -2 4 Z",
        fillColor: "#4bff8f",
        fillOpacity: 1,
        strokeColor: "#111217",
        strokeWeight: 2,
      }
    });
  } else destMarker.setPosition(latlng);

  calculateRoute();
}

function calculateRoute() {
  const o = document.getElementById("origen").value.trim();
  const d = document.getElementById("destino").value.trim();

  if (!o || !d) return;

  directionsService.route(
    {
      origin: o,
      destination: d,
      travelMode: "DRIVING",
    },
    (result, status) => {
      if (status === "OK") {
        directionsRenderer.setDirections(result);

        const leg = result.routes[0].legs[0];
        document.getElementById("distancia").textContent = leg.distance.text;
        document.getElementById("tiempo").textContent = leg.duration.text;
        document.getElementById("info").style.display = "block";
      }
    }
  );
}

window.initMap = initMap;
</script>

<!-- GOOGLE MAPS API -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD32zkRd46s5jKHkTjj2868WOMfv7m_V48&libraries=places&callback=initMap" async defer></script>

</body>
</html>
