
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#050508">
<title>Reservar ‚Äì COLESTUR</title>

<link rel="stylesheet" href="css/style.css">

<style>
:root {
  --bg:#050508;
  --card:#0c0d11;
  --card-soft:#13141b;
  --accent:#3a7ce9;
  --text:#f4f6f9;
  --muted:#9ca3b5;
  --border:#1c1d25;
}

/* Mantener mismo estilo del INDEX */
body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
}

/* HEADER */
.header {
  padding:16px;
  display:flex;
  align-items:center;
  gap:12px;
  background:#0b0c10;     /* MISMO COLOR QUE EL INDEX */
  border-bottom:1px solid #0e1015;
  position:sticky;
  top:0;
  z-index:5;
}

.logo-circle {
  width:38px;
  height:38px;
  border-radius:50%;
  background:linear-gradient(135deg,#ffeaa7,#f1c40f);
  display:flex;
  justify-content:center;
  align-items:center;
  color:#111;
  font-weight:800;
}

.brand-text span { font-size:12px; color:var(--muted); }
.brand-text h1 { margin:0; font-size:18px; font-weight:700; }

/* MAIN */
main {
  padding:20px 16px 140px;
  max-width:780px;
  margin:auto;
}

/* TARJETAS */
.trip-card {
  background:var(--card);
  padding:18px;
  border-radius:18px;
  border:1px solid var(--border);
  margin-bottom:22px;
}

label {
  display:block;
  margin-bottom:6px;
  font-size:12px;
  color:var(--muted);
}

input, select {
  width:100%;
  background:var(--card-soft);
  border:1px solid var(--border);
  color:var(--text);
  padding:12px;
  border-radius:12px;
  font-size:14px;
}

/* MAPA */
#map {
  width:100%;
  height:300px;
  border-radius:18px;
  border:1px solid var(--border);
  overflow:hidden;
  margin-bottom:15px;
}

/* INFO DISTANCIA */
.info-box {
  background:var(--card);
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  margin-bottom:20px;
}

/* BOT√ìN CONFIRMAR */
.confirm-container {
  position:fixed;
  bottom:75px;
  left:0;
  right:0;
  padding:0 18px;
  z-index:9999;
}

.btn-confirm {
  width:100%;
  background:var(--accent);
  color:white;
  border:none;
  padding:15px;
  font-size:16px;
  border-radius:999px;
  font-weight:700;
}

/* NAV BAR INFERIOR */
.bottom-nav {
  position:fixed;
  bottom:0; left:0; right:0;
  background:#0d0e12;
  border-top:1px solid #1f2027;
  padding:10px 0 8px;
  display:flex;
  justify-content:space-around;
  z-index:9999;
}

.nav-item {
  text-align:center;
  color:#9ca3b5;
  font-size:13px;
  text-decoration:none;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.nav-item span { font-size:22px; margin-bottom:2px; }

.nav-active { color:white !important; font-weight:600; }

</style>
</head>

<body>

<header class="header">
  <div class="logo-circle">CR</div>
  <div class="brand-text">
    <span>TRANSPORTE ESPECIAL</span>
    <h1>COLESTUR S.A.S.</h1>
  </div>
</header>

<main>

<section class="trip-card">
  <label>Punto de recogida</label>
  <input id="origen" placeholder="Cargando ubicaci√≥n...">

  <label style="margin-top:14px;">Destino</label>
  <input id="destino" placeholder="¬øA d√≥nde vas?">
</section>

<div id="map"></div>

<div class="info-box">
  <div>üìç <b>Distancia:</b> <span id="distancia">‚Äî</span></div>
  <div>‚è± <b>Tiempo estimado:</b> <span id="tiempo">‚Äî</span></div>
</div>

<section class="trip-card">
  <label>Nombre completo</label>
  <input id="nombre">

  <label style="margin-top:12px;">WhatsApp</label>
  <input id="telefono" type="tel" placeholder="57300...">

  <label style="margin-top:12px;">Servicio</label>
  <select id="servicio">
    <option>Escolar</option>
    <option>Empresarial</option>
    <option>Turismo</option>
    <option>Aeropuerto</option>
  </select>

  <label style="margin-top:12px;">Fecha</label>
  <input type="date" id="fecha">

  <label style="margin-top:12px;">Hora</label>
  <input type="time" id="hora">

  <label style="margin-top:12px;">Pasajeros</label>
  <input type="number" id="pasajeros" value="1" min="1">
</section>

</main>

<div class="confirm-container">
  <button class="btn-confirm">Confirmar reserva</button>
</div>

<!-- NAV BAR -->
<div class="bottom-nav">
  <a href="index.html" class="nav-item">
    <span>üè†</span>Inicio
  </a>
  <a href="reservar.html" class="nav-item nav-active">
    <span>üöå</span>Reservar
  </a>
  <a href="contacto.html" class="nav-item">
    <span>üìû</span>Contacto
  </a>
</div>

<!-- MAPS SCRIPT -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD32zkRd46s5jKHkTjj2868WOMfv7m_V48&libraries=places&callback=initMap" async defer></script>

<script>
let map, originMarker, destMarker, directions, renderer;

function initMap() {

  directions = new google.maps.DirectionsService();
  renderer = new google.maps.DirectionsRenderer({
    suppressMarkers:true,
    polylineOptions:{strokeColor:"#3a7ce9", strokeWeight:6}
  });

  map = new google.maps.Map(document.getElementById("map"), {
    center:{lat:4.7, lng:-74.07},
    zoom:14,
    disableDefaultUI:true
  });

  renderer.setMap(map);

  const geocoder = new google.maps.Geocoder();

  navigator.geolocation.getCurrentPosition(pos => {
    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;

    document.getElementById("origen").value = "Mi ubicaci√≥n actual";

    originMarker = new google.maps.Marker({
      position:{lat,lng},
      map,
      icon:{
        path:google.maps.SymbolPath.CIRCLE,
        scale:8,
        fillColor:"#3a7ce9",
        fillOpacity:1,
        strokeColor:"#fff",
        strokeWeight:2
      }
    });

    map.setCenter({lat,lng});
  });

  const acOrigen = new google.maps.places.Autocomplete(
    document.getElementById("origen"),
    { fields:["formatted_address","geometry"] }
  );

  const acDestino = new google.maps.places.Autocomplete(
    document.getElementById("destino"),
    { fields:["formatted_address","geometry"] }
  );

  acOrigen.addListener("place_changed", () => {
    const p = acOrigen.getPlace();
    if (!p.geometry) return;
    placeOrigin(p.geometry.location);
    calcularRuta();
  });

  acDestino.addListener("place_changed", () => {
    const p = acDestino.getPlace();
    if (!p.geometry) return;
    placeDestino(p.geometry.location);
    calcularRuta();
  });
}

function placeOrigin(loc){
  if(!originMarker){
    originMarker = new google.maps.Marker({map});
  }
  originMarker.setPosition(loc);
}

function placeDestino(loc){
  if(!destMarker){
    destMarker = new google.maps.Marker({
      map,
      icon:{
        path:"M0 0 L 2 4 L 0 12 L -2 4 Z",
        fillColor:"#4bff8f",
        fillOpacity:1
      }
    });
  }
  destMarker.setPosition(loc);
}

function calcularRuta(){
  if(!originMarker || !destMarker) return;

  directions.route({
    origin: originMarker.getPosition(),
    destination: destMarker.getPosition(),
    travelMode:"DRIVING",
    drivingOptions:{
      departureTime:new Date(),
      trafficModel:"best_guess"
    }
  }, (res,status)=>{
    if(status!=="OK") return;

    renderer.setDirections(res);

    const leg = res.routes[0].legs[0];
    document.getElementById("distancia").innerText = leg.distance.text;
    document.getElementById("tiempo").innerText = leg.duration_in_traffic.text;
  });
}
</script>

</body>
</html>
