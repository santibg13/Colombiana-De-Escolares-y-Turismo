<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
    getAuth, 
    signInWithEmailAndPassword,
    onAuthStateChanged 
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCpuX28qe2YFhX2rSzH01AIPP9EQDIsP94",
    authDomain: "colestur-reservas.firebaseapp.com",
    projectId: "colestur-reservas",
    storageBucket: "colestur-reservas.firebasestorage.app",
    messagingSenderId: "123689903908",
    appId: "1:123689903908:web:d4d710d7165e64a369f5b1",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const emailInput = document.getElementById("email");
const passInput = document.getElementById("password");
const btn = document.getElementById("loginBtn");
const msg = document.getElementById("msg");

btn.addEventListener("click", async () => {
    msg.style.color = "#e8edf3";
    msg.textContent = "Ingresando...";

    try {
        await signInWithEmailAndPassword(auth, emailInput.value, passInput.value);
        window.location.href = "admin.html";
    } catch (err) {
        msg.style.color = "#ff5252";
        msg.textContent = "Correo o contraseña incorrectos.";
    }
});

// ❌ Ya NO redirige aquí
onAuthStateChanged(auth, (user) => {
    if (user) {
        msg.style.color = "#4caf50";
        msg.innerHTML = "Sesión iniciada.<br>Puedes continuar.";
    }
});
</script>
